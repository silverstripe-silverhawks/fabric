(function(e,v){typeof exports=="object"&&typeof module!="undefined"?v(require("vue")):typeof define=="function"&&define.amd?define(["vue"],v):(e=typeof globalThis!="undefined"?globalThis:e||self,v(e.Vue))})(this,function(e){"use strict";var v=!1;/*!
  * pinia v2.0.16
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let B;const O=t=>B=t,I=Symbol();function R(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var E;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(E||(E={}));function T(){const t=e.effectScope(!0),o=t.run(()=>e.ref({}));let n=[],s=[];const c=e.markRaw({install(i){O(c),c._a=i,i.provide(I,c),i.config.globalProperties.$pinia=c,s.forEach(l=>n.push(l)),s=[]},use(i){return!this._a&&!v?s.push(i):n.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:o});return c}const L=()=>{};function x(t,o,n,s=L){t.push(o);const c=()=>{const i=t.indexOf(o);i>-1&&(t.splice(i,1),s())};return!n&&e.getCurrentInstance()&&e.onUnmounted(c),c}function S(t,...o){t.slice().forEach(n=>{n(...o)})}function A(t,o){for(const n in o){if(!o.hasOwnProperty(n))continue;const s=o[n],c=t[n];R(c)&&R(s)&&t.hasOwnProperty(n)&&!e.isRef(s)&&!e.isReactive(s)?t[n]=A(c,s):t[n]=s}return t}const $=Symbol();function H(t){return!R(t)||!t.hasOwnProperty($)}const{assign:_}=Object;function q(t){return!!(e.isRef(t)&&t.effect)}function D(t,o,n,s){const{state:c,actions:i,getters:l}=o,f=n.state.value[t];let y;function b(){f||(n.state.value[t]=c?c():{});const p=e.toRefs(n.state.value[t]);return _(p,i,Object.keys(l||{}).reduce((h,g)=>(h[g]=e.markRaw(e.computed(()=>{O(n);const k=n._s.get(t);return l[g].call(k,k)})),h),{}))}return y=F(t,b,o,n,s,!0),y.$reset=function(){const h=c?c():{};this.$patch(g=>{_(g,h)})},y}function F(t,o,n={},s,c,i){let l;const f=_({actions:{}},n),y={deep:!0};let b,p,h=e.markRaw([]),g=e.markRaw([]),k;const w=s.state.value[t];!i&&!w&&(s.state.value[t]={}),e.ref({});let C;function J(a){let r;b=p=!1,typeof a=="function"?(a(s.state.value[t]),r={type:E.patchFunction,storeId:t,events:k}):(A(s.state.value[t],a),r={type:E.patchObject,payload:a,storeId:t,events:k});const m=C=Symbol();e.nextTick().then(()=>{C===m&&(b=!0)}),p=!0,S(h,r,s.state.value[t])}const ot=L;function ct(){l.stop(),h=[],g=[],s._s.delete(t)}function rt(a,r){return function(){O(s);const m=Array.from(arguments),N=[],V=[];function it(u){N.push(u)}function lt(u){V.push(u)}S(g,{args:m,name:a,store:d,after:it,onError:lt});let j;try{j=r.apply(this&&this.$id===t?this:d,m)}catch(u){throw S(V,u),u}return j instanceof Promise?j.then(u=>(S(N,u),u)).catch(u=>(S(V,u),Promise.reject(u))):(S(N,j),j)}}const at={_p:s,$id:t,$onAction:x.bind(null,g),$patch:J,$reset:ot,$subscribe(a,r={}){const m=x(h,a,r.detached,()=>N()),N=l.run(()=>e.watch(()=>s.state.value[t],V=>{(r.flush==="sync"?p:b)&&a({storeId:t,type:E.direct,events:k},V)},_({},y,r)));return m},$dispose:ct},d=e.reactive(_({},at));s._s.set(t,d);const P=s._e.run(()=>(l=e.effectScope(),l.run(()=>o())));for(const a in P){const r=P[a];if(e.isRef(r)&&!q(r)||e.isReactive(r))i||(w&&H(r)&&(e.isRef(r)?r.value=w[a]:A(r,w[a])),s.state.value[t][a]=r);else if(typeof r=="function"){const m=rt(a,r);P[a]=m,f.actions[a]=r}}return _(d,P),_(e.toRaw(d),P),Object.defineProperty(d,"$state",{get:()=>s.state.value[t],set:a=>{J(r=>{_(r,a)})}}),s._p.forEach(a=>{_(d,l.run(()=>a({store:d,app:s._a,pinia:s,options:f})))}),w&&i&&n.hydrate&&n.hydrate(d.$state,w),b=!0,p=!0,d}function G(t,o,n){let s,c;const i=typeof o=="function";typeof t=="string"?(s=t,c=i?n:o):(c=t,s=t.id);function l(f,y){const b=e.getCurrentInstance();return f=f||b&&e.inject(I),f&&O(f),f=B,f._s.has(s)||(i?F(s,o,c,f):D(s,c,f)),f._s.get(s)}return l.$id=s,l}const U=G("store",{state:()=>({blocks:[],page:{blocks:[],settings:[]},view:""}),getters:{getBlockByTitle:t=>o=>t.blocks.filter(n=>n.Title===o),getPageSettings({page:t}){return t.settings}},actions:{setBlocks(t){this.blocks=t},setView(t){this.view=t},setPageInfo(t){this.page=t}}});var W=(t,o)=>{const n=t.__vccOpts||t;for(const[s,c]of o)n[s]=c;return n};const z={},K=e.createElementVNode("div",{class:"content"},[e.createElementVNode("div",{class:"title"},"Global features")],-1),Q=e.createElementVNode("div",{class:"menu__item"},[e.createElementVNode("a",{role:"button"},"Header")],-1),X=e.createElementVNode("div",{class:"menu__item"},[e.createElementVNode("a",{role:"button"},"Footer")],-1);function Y(t,o){return e.openBlock(),e.createElementBlock(e.Fragment,null,[K,Q,X],64)}var Z=W(z,[["render",Y]]),ft="";const M={class:"fabricator"},tt={class:"fabricator__content"},et={class:"fabricator__navigation"},st=e.createStaticVNode('<div class="fabricator__navigation"><div class="content"><div class="title">Page content</div></div><div class="block-options"><button class="fabricator-btn fabricator-btn--blue fabricator-btn__icon--left fabricator-btn__icon-add"> Add a block </button></div></div>',1),nt={__name:"App",setup(t){const o=U(),n=document.querySelector("#fabricator-app");n.getAttribute("username"),JSON.parse(n.getAttribute("allowed-fields"));const s=JSON.parse(n.getAttribute("blocks")),c=JSON.parse(n.getAttribute("settings")),i=JSON.parse(n.getAttribute("block-types")),l=JSON.parse(n.getAttribute("page-fields"));return o.setBlocks(i),o.setPageInfo({pageFields:l,blocks:s,settings:c}),console.log(s),o.getBlockByTitle("File List"),(f,y)=>(e.openBlock(),e.createElementBlock("div",M,[e.createElementVNode("div",tt,[e.createElementVNode("div",et,[e.createVNode(Z)]),st])]))}};window.document.addEventListener("DOMContentLoaded",()=>{const t=T(),o=e.createApp(nt);o.use(t),o.mount("#fabricator-app")})});
